---
title: "[React Router] URLã‚¯ã‚¨ãƒªã‚¹ãƒˆãƒªãƒ³ã‚°ã‚’å–å¾—ã™ã‚‹"
emoji: "ğŸº"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["React","TypeScript","ReactRouter"]
published: true
---


React Router(v5)ã‚’ä½¿ã£ã¦ã„ã¦ã€`http://localhost:3000/books?hoge=1111&fuga=aiueo`ã¨ã„ã†ã‚ˆã†ãªURLã®ã‚¯ã‚¨ãƒªã‚¹ãƒˆãƒªãƒ³ã‚°`?hoge=1&fuga=aiueo`ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’ã„ãã¤ã‹è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚ãªãŠã€TypeScriptã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚


## è‡ªåŠ›ã§å–å¾—ã™ã‚‹

`search`ã«ã¯`?hoge=1111&fuga=aiueo`ã¨ã„ã†ã‚ˆã†ãªæ–‡å­—åˆ—ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®æ–‡å­—åˆ—ã‚’æ“ä½œã—ã¦ç„¡ç†ã‚„ã‚Šå–å¾—ã—ã¦ã¿ã¾ã—ãŸã€‚ä½•ã‹ã‚‚ã®ã™ã”ãåˆ¶ç´„ãŒãªã„é™ã‚Šã€ã“ã‚Œã¯æ¡ç”¨ã—ãªã„ã¨æ€ã„ã¾ã™ã€‚

```jsx
import React from 'react';
import { useLocation } from 'react-router-dom';

interface QueryString {
  [key: string]: string;
}

const Books: React.FC = () => {
  const search = useLocation().search;

  const query1 = search
    .slice(1)
    .split('&')
    .map((str) => [str.split('=')[0], str.split('=')[1]])
    .reduce((acc, a) => {
      acc[a[0]] = a[1];
      return acc;
    }, {} as QueryString);

  return (
    <div>
      <h2>Books Page</h2>
      <div>hoge: {query1['hoge']}</div>
      <div>fuga: {query1['fuga']}</div>
    </div>
  );
};

export default Books;
```



## URLSearchParamsã§å–å¾—ã™ã‚‹

React Routerã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¼‰ã®ã‚ã‚‹æ–¹æ³•ã§ã™ã€‚[`URLSearchParams`](https://developer.mozilla.org/ja/docs/Web/API/URLSearchParams)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä¸€ç•ªã‚·ãƒ³ãƒ—ãƒ«ã§è‰¯ã•ãã†ã§ã™ã€‚ãŸã ã—ã€`URLSearchParams`ã¯IEæœªå¯¾å¿œã§ã™ã€‚

https://reactrouter.com/web/example/query-parameters

```jsx
import React from 'react';
import { useLocation } from 'react-router-dom';

const Books: React.FC = () => {
  const search = useLocation().search;

  const query2 = new URLSearchParams(search);
  return (
    <div>
      <h2>Books Page</h2>
      <div>hoge: {query2.get('hoge')}</div>
      <div>fuga: {query2.get('fuga')}</div>
    </div>
  );
};

export default Books;
```



## query-sringã§å–å¾—ã™ã‚‹

`query-string`ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å–å¾—ã§ãã¾ã™ã€‚`URLSearchParams`ã‚ˆã‚Šè¤‡é›‘ãªå¤‰æ›ãŒå¿…è¦ãªå ´åˆã«ä½¿ã†ã¨è‰¯ã•ãã†ã§ã™ï¼ˆGitHubã®README.mdã«æ§˜ã€…ãªAPIã®ä½¿ç”¨ä¾‹ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚ãŸã ã—ã€ã“ã¡ã‚‰ã‚‚IEæœªå¯¾å¿œã®ã‚ˆã†ã§ã™ã€‚

https://github.com/sindresorhus/query-string

```jsx
import React from 'react';
import { useLocation } from 'react-router-dom';
import queryString from 'query-string';

const Books: React.FC = () => {
  const search = useLocation().search;

  const query3 = queryString.parse(search);
  return (
    <div>
      <h2>Books Page</h2>
      <div>hoge: {query3['hoge']}</div>
      <div>fuga: {query3['fuga']}</div>
    </div>
  );
};

export default Books;
```



## ã¾ã¨ã‚

ç§ãŒï¼ˆä»•äº‹ã‚„ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã«ãŠã„ã¦ï¼‰å®Ÿè£…ã™ã‚‹ç¯„å›²ã§ã¯IEå¯¾å¿œã¯ä¸è¦ãªãŸã‚ã€`URLSearchParams`ã‚’ä½¿ã†ã‹`query-string`ã‚’ä½¿ã†ã‹ã®äºŒæŠã«ãªã‚Šãã†ã§ã™ã€‚

